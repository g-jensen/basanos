name: "Product API"

scenarios:
  - id: search
    name: "Search products returns results"
    run:
      command: echo '{"products":[{"id":1,"name":"Widget Pro"}],"total":1}'
      timeout: 5s
    assertions:
      - command: ${ASSERT}/assert_contains "Widget Pro" ${RUN_OUTPUT}/stdout
        timeout: 1s
      - command: ${ASSERT}/assert_matches '"total":\s*[1-9]' ${RUN_OUTPUT}/stdout
        timeout: 1s

  - id: empty_search
    name: "Search with no results"
    run:
      command: echo '{"products":[],"total":0}'
      timeout: 5s
    assertions:
      - command: ${ASSERT}/assert_contains '"total":0' ${RUN_OUTPUT}/stdout
        timeout: 1s
